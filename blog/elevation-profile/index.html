<!doctype html><html lang=en-us class=dark><head>
<meta charset=utf-8>
<meta http-equiv=content-language content="en-US">
<meta name=viewport content="width=device-width,initial-scale=1">
<meta http-equiv=x-ua-compatible content="ie=edge">
<title>Elevation profile of Spain in R &#183; Julia G. de Aledo</title>
<meta name=title content="Elevation profile of Spain in R &#183; Julia G. de Aledo">
<meta name=description content="PhD student at Universidad Autonoma de Madrid">
<meta name=robots content="all">
<link rel=canonical href=https://juliagdealedo.github.io/blog/elevation-profile/>
<link type=text/css rel=stylesheet href=/css/schemes/avocado.min.22d40efa0787e9b20acd69125bc170d314a9add3ce43ce84c672c1bd033bc3dddb3c86fe98e871624a10c8daa3b0d716be9cab3c4575ca61e0e2f2f05c3e3d05.css integrity="sha512-ItQO+geH6bIKzWkSW8Fw0xSprdPOQ86ExnLBvQM7w93bPIb+mOhxYkoQyNqjsNcWvpyrPEV1ymHg4vLwXD49BQ==">
<link type=text/css rel=stylesheet href=/css/compiled/main.min.4076b9cf114dd23cca017f3365e2205a4c9a4b2c0ef4193ccd08883f76e554aa40f674a8f6e77a1b2895be0975ba8e019b0c59996c2eea32e4970ca4d5221653.css integrity="sha512-QHa5zxFN0jzKAX8zZeIgWkyaSywO9Bk8zQiIP3blVKpA9nSo9ud6GyiVvgl1uo4BmwxZmWwu6jLklwyk1SIWUw==">
<script>localStorage.removeItem("preferredAppearance")</script>
<link rel=apple-touch-icon sizes=180x180 href=/apple-touch-icon.png>
<link rel=icon type=image/png sizes=32x32 href=/favicon-32x32.png>
<link rel=icon type=image/png sizes=16x16 href=/favicon-16x16.png>
<link rel=manifest href=/site.webmanifest>
<meta property="og:title" content="Elevation profile of Spain in R">
<meta property="og:description" content="From Picos de Europa to Sierra Nevada # Have you ever wondered what would be of Spain if you cut it in half? What is there after Despeñaperros? Who is taller, meseta norte or meseta sur? How come Ávila is the highest capital province in Spain?!
I did, and here is the result:
Indeed, after despeñaderos, there is a big hole.
Following the main tips to your elevation profile in R">
<meta property="og:type" content="article">
<meta property="og:url" content="https://juliagdealedo.github.io/blog/elevation-profile/"><meta property="article:section" content="blog">
<meta property="article:published_time" content="2021-12-27T14:02:16+01:00">
<meta property="article:modified_time" content="2021-12-27T14:02:16+01:00">
<meta name=twitter:card content="summary">
<meta name=twitter:title content="Elevation profile of Spain in R">
<meta name=twitter:description content="From Picos de Europa to Sierra Nevada # Have you ever wondered what would be of Spain if you cut it in half? What is there after Despeñaperros? Who is taller, meseta norte or meseta sur? How come Ávila is the highest capital province in Spain?!
I did, and here is the result:
Indeed, after despeñaderos, there is a big hole.
Following the main tips to your elevation profile in R">
<script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","articleSection":"Blog","name":"Elevation profile of Spain in R","headline":"Elevation profile of Spain in R","description":"From Picos de Europa to Sierra Nevada # Have you ever wondered what would be of Spain if you cut it in half? What is there after Despeñaperros? Who is taller, meseta norte or meseta sur? How come Ávila is the highest capital province in Spain?!\nI did, and here is the result:\nIndeed, after despeñaderos, there is a big hole.\nFollowing the main tips to your elevation profile in R","inLanguage":"en-US","author":{"@type":"Person","name":"Julia G. de Aledo"},"creator":{"@type":"Person","name":"Julia G. de Aledo"},"copyrightHolder":"Julia G. de Aledo","copyrightYear":"2021","dateCreated":"2021-12-27T14:02:16\u002b01:00","datePublished":"2021-12-27T14:02:16\u002b01:00","dateModified":"2021-12-27T14:02:16\u002b01:00","url":"https:\/\/juliagdealedo.github.io\/blog\/elevation-profile\/","wordCount":"199","keywords":[]}</script>
<meta name=generator content="Hugo 0.90.1">
<meta name=author content="Julia G. de Aledo">
<link href=https://twitter.com/juliagdealedo rel=me>
<link href=mailto:julia.gonzalezdealedo@uam.es rel=me>
<link href=https://linkedin.com/ rel=me>
<link href=https://www.youtube.com/channel/UCgnkevuKdftZyKzGHGEVNSg/featured rel=me>
</head>
<body class="flex flex-col h-screen px-6 m-auto text-lg leading-7 bg-neutral text-neutral-900 sm:px-14 md:px-24 lg:px-32 dark:bg-neutral-800 dark:text-neutral max-w-7xl"><header class="flex justify-between py-6 font-semibold sm:items-center sm:py-10 text-neutral-800 dark:text-neutral">
<div>
<a class="hover:underline hover:underline-primary-500 hover:underline-thickness-bold hover:underline-offset-small" rel=me href=/>Julia G. de Aledo</a>
</div>
<nav>
<ul class="flex flex-col list-none sm:flex-row">
<li class="mb-1 text-right sm:mb-0 sm:mr-7 sm:last:mr-0">
<a class="hover:underline hover:underline-primary-500 hover:underline-thickness-bold hover:underline-offset-small" href=/about/ title="About me">About me</a>
</li>
<li class="mb-1 text-right sm:mb-0 sm:mr-7 sm:last:mr-0">
<a class="hover:underline hover:underline-primary-500 hover:underline-thickness-bold hover:underline-offset-small" href=/projects/ title=Projects>Projects</a>
</li>
<li class="mb-1 text-right sm:mb-0 sm:mr-7 sm:last:mr-0">
<a class="hover:underline hover:underline-primary-500 hover:underline-thickness-bold hover:underline-offset-small" href=/publications/ title=Publications>Publications</a>
</li>
<li class="mb-1 text-right sm:mb-0 sm:mr-7 sm:last:mr-0">
<a class="hover:underline hover:underline-primary-500 hover:underline-thickness-bold hover:underline-offset-small" href=/blog/ title=Blog>Blog</a>
</li>
</ul>
</nav>
</header>
<main class=flex-grow>
<article class=max-w-prose>
<header>
<ol class="text-sm text-neutral-400 dark:text-neutral-500">
<li class="inline hidden">
<a class="hover:underline hover:underline-neutral-300 dark:underline-neutral-600" href=/>Julia G. de Aledo</a><span class="px-1 text-primary-500">/</span>
</li>
<li class=inline>
<a class="hover:underline hover:underline-neutral-300 dark:underline-neutral-600" href=/blog/>Blog</a><span class="px-1 text-primary-500">/</span>
</li>
<li class="inline hidden">
<a class="hover:underline hover:underline-neutral-300 dark:underline-neutral-600" href=/blog/elevation-profile/>Elevation profile of Spain in R</a><span class="px-1 text-primary-500">/</span>
</li>
</ol>
<h1 class="mt-0 text-4xl font-extrabold text-neutral-800 dark:text-neutral">
Elevation profile of Spain in R
</h1>
<div class="mt-8 mb-12 text-base text-neutral-400 dark:text-neutral-500">
<div class="flex flex-row items-center">
</div>
</div>
</header>
<section class="prose dark:prose-light">
<h2 id=from-picos-de-europa-to-sierra-nevada>From Picos de Europa to Sierra Nevada <a class=heading-anchor href=#from-picos-de-europa-to-sierra-nevada aria-label=Anchor>#</a></h2>
<p>Have you ever wondered what would be of Spain if you cut it in half?
What is there after Despeñaperros?
Who is taller, meseta norte or meseta sur?
How come Ávila is the highest capital province in Spain?!</p>
<p>I did, and here is the result:</p>
<p><img src=/img/profile9.png alt=profile></p>
<p><em>Indeed, after despeñaderos, there is a big hole.</em></p>
<p>Following the main tips to your elevation profile in R</p>
<h2 id=step-by-step>Step by step <a class=heading-anchor href=#step-by-step aria-label=Anchor>#</a></h2>
<ol>
<li>
<p>Download a elevation shapefile (e.g. for Spain: <a href=http://www.ign.es/web/ign/portal>IGN</a>)</p>
</li>
<li>
<p>Download a line shapefile with the trajectory of your profile (e.g. from GIS)</p>
</li>
<li>
<p>Download a world map contour countries</p>
</li>
<li>
<p>Load all to R</p>
</li>
<li>
<p>Convert line to points</p>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-r data-lang=r> <span style=color:#75715e># Obtain line elevation values</span>
 line2 <span style=color:#f92672>&lt;-</span> <span style=color:#a6e22e>spTransform</span>(line, <span style=color:#e6db74>&#34;+init=epsg:25830&#34;</span>)
 psp <span style=color:#f92672>&lt;-</span> <span style=color:#a6e22e>as.psp.SpatialLines</span>(line2)
 pts <span style=color:#f92672>&lt;-</span> <span style=color:#a6e22e>pointsOnLines</span>(psp, eps<span style=color:#f92672>=</span><span style=color:#ae81ff>10</span>)
 <span style=color:#75715e># Convert to spatial points</span>
 pts1 <span style=color:#f92672>&lt;-</span> <span style=color:#a6e22e>SpatialPoints</span>(coords <span style=color:#f92672>=</span> <span style=color:#a6e22e>cbind</span>(pts<span style=color:#f92672>$</span>x, pts<span style=color:#f92672>$</span>y), proj4string <span style=color:#f92672>=</span> <span style=color:#a6e22e>CRS</span>(<span style=color:#e6db74>&#34;+init=epsg:25830&#34;</span>))
 pdf_data <span style=color:#f92672>&lt;-</span> <span style=color:#a6e22e>as.data.frame</span>(pts1)
</code></pre></div></li>
<li>
<p>Calculate elevation and distance</p>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-r data-lang=r>pdf_data<span style=color:#f92672>$</span>dem <span style=color:#f92672>&lt;-</span> raster<span style=color:#f92672>::</span><span style=color:#a6e22e>extract</span>(r0, pts1) 
pdf_data<span style=color:#f92672>$</span>dist <span style=color:#f92672>&lt;-</span> <span style=color:#a6e22e>seq</span>(<span style=color:#ae81ff>0</span>, (<span style=color:#a6e22e>nrow</span>(pdf_data)<span style=color:#ae81ff>-1</span>)<span style=color:#f92672>*</span><span style=color:#ae81ff>10</span>, <span style=color:#ae81ff>10</span>)
pdf_data<span style=color:#f92672>$</span>dist <span style=color:#f92672>&lt;-</span> pdf_data<span style=color:#f92672>$</span>dist<span style=color:#f92672>/</span><span style=color:#ae81ff>1000</span> <span style=color:#75715e># to km</span>
</code></pre></div></li>
<li>
<p>Plot it with ggplot</p>
<ul>
<li>
<p><code>geom_line</code> with MetPalettes color <a href=https://github.com/BlakeRMills/MetBrewer>Hokusai</a></p>
</li>
<li>
<p><code>geom_label_repel</code> to add the labels</p>
</li>
<li>
<p><code>theme_solarized</code> for background color</p>
</li>
<li>
<p><code>geom_polygon</code> to plot the Spain contour</p>
</li>
<li>
<p><code>inset_element</code> to add it to the previous graph</p>
</li>
</ul>
</li>
</ol>
<p>Find here the <a href=https://github.com/juliagdealedo/elevation-profile>full code</a></p>
</section>
<footer class=pt-8>
<section class="flex flex-row flex-wrap justify-center pt-4 text-xl">
<a class="bg-neutral-300 text-neutral-700 dark:bg-neutral-700 dark:text-neutral-300 dark:hover:bg-primary-400 dark:hover:text-neutral-800 m-1 hover:bg-primary-500 hover:text-neutral rounded min-w-[2.4rem] inline-block text-center p-1" href="https://www.facebook.com/sharer/sharer.php?u=https://juliagdealedo.github.io/blog/elevation-profile/&quote=Elevation%20profile%20of%20Spain%20in%20R" title="Share on Facebook">
<span class="relative inline-block align-text-bottom icon"><svg aria-hidden="true" focusable="false" data-prefix="fab" data-icon="facebook" class="svg-inline--fa fa-facebook fa-w-16" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentcolor" d="M504 256C504 119 393 8 256 8S8 119 8 256c0 123.78 90.69 226.38 209.25 245V327.69h-63V256h63v-54.64c0-62.15 37-96.48 93.67-96.48 27.14.0 55.52 4.84 55.52 4.84v61h-31.28c-30.8.0-40.41 19.12-40.41 38.73V256h68.78l-11 71.69h-57.78V501C413.31 482.38 504 379.78 504 256z"/></svg>
</span>
</a>
<a class="bg-neutral-300 text-neutral-700 dark:bg-neutral-700 dark:text-neutral-300 dark:hover:bg-primary-400 dark:hover:text-neutral-800 m-1 hover:bg-primary-500 hover:text-neutral rounded min-w-[2.4rem] inline-block text-center p-1" href="https://twitter.com/intent/tweet/?url=https://juliagdealedo.github.io/blog/elevation-profile/&text=Elevation%20profile%20of%20Spain%20in%20R" title="Tweet on Twitter">
<span class="relative inline-block align-text-bottom icon"><svg aria-hidden="true" focusable="false" data-prefix="fab" data-icon="twitter" class="svg-inline--fa fa-twitter fa-w-16" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentcolor" d="M459.37 151.716c.325 4.548.325 9.097.325 13.645.0 138.72-105.583 298.558-298.558 298.558-59.452.0-114.68-17.219-161.137-47.106 8.447.974 16.568 1.299 25.34 1.299 49.055.0 94.213-16.568 130.274-44.832-46.132-.975-84.792-31.188-98.112-72.772 6.498.974 12.995 1.624 19.818 1.624 9.421.0 18.843-1.3 27.614-3.573-48.081-9.747-84.143-51.98-84.143-102.985v-1.299c13.969 7.797 30.214 12.67 47.431 13.319-28.264-18.843-46.781-51.005-46.781-87.391.0-19.492 5.197-37.36 14.294-52.954 51.655 63.675 129.3 105.258 216.365 109.807-1.624-7.797-2.599-15.918-2.599-24.04.0-57.828 46.782-104.934 104.934-104.934 30.213.0 57.502 12.67 76.67 33.137 23.715-4.548 46.456-13.32 66.599-25.34-7.798 24.366-24.366 44.833-46.132 57.827 21.117-2.273 41.584-8.122 60.426-16.243-14.292 20.791-32.161 39.308-52.628 54.253z"/></svg>
</span>
</a>
<a class="bg-neutral-300 text-neutral-700 dark:bg-neutral-700 dark:text-neutral-300 dark:hover:bg-primary-400 dark:hover:text-neutral-800 m-1 hover:bg-primary-500 hover:text-neutral rounded min-w-[2.4rem] inline-block text-center p-1" href="https://reddit.com/submit/?url=https://juliagdealedo.github.io/blog/elevation-profile/&resubmit=true&title=Elevation%20profile%20of%20Spain%20in%20R" title="Submit to Reddit">
<span class="relative inline-block align-text-bottom icon"><svg aria-hidden="true" focusable="false" data-prefix="fab" data-icon="reddit" class="svg-inline--fa fa-reddit fa-w-16" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentcolor" d="M201.5 305.5c-13.8.0-24.9-11.1-24.9-24.6.0-13.8 11.1-24.9 24.9-24.9 13.6.0 24.6 11.1 24.6 24.9.0 13.6-11.1 24.6-24.6 24.6zM504 256c0 137-111 248-248 248S8 393 8 256 119 8 256 8s248 111 248 248zm-132.3-41.2c-9.4.0-17.7 3.9-23.8 10-22.4-15.5-52.6-25.5-86.1-26.6l17.4-78.3 55.4 12.5c0 13.6 11.1 24.6 24.6 24.6 13.8.0 24.9-11.3 24.9-24.9s-11.1-24.9-24.9-24.9c-9.7.0-18 5.8-22.1 13.8l-61.2-13.6c-3-.8-6.1 1.4-6.9 4.4l-19.1 86.4c-33.2 1.4-63.1 11.3-85.5 26.8-6.1-6.4-14.7-10.2-24.1-10.2-34.9.0-46.3 46.9-14.4 62.8-1.1 5-1.7 10.2-1.7 15.5.0 52.6 59.2 95.2 132 95.2 73.1.0 132.3-42.6 132.3-95.2.0-5.3-.6-10.8-1.9-15.8 31.3-16 19.8-62.5-14.9-62.5zM302.8 331c-18.2 18.2-76.1 17.9-93.6.0-2.2-2.2-6.1-2.2-8.3.0-2.5 2.5-2.5 6.4.0 8.6 22.8 22.8 87.3 22.8 110.2.0 2.5-2.2 2.5-6.1.0-8.6-2.2-2.2-6.1-2.2-8.3.0zm7.7-75c-13.6.0-24.6 11.1-24.6 24.9.0 13.6 11.1 24.6 24.6 24.6 13.8.0 24.9-11.1 24.9-24.6.0-13.8-11-24.9-24.9-24.9z"/></svg>
</span>
</a>
<a class="bg-neutral-300 text-neutral-700 dark:bg-neutral-700 dark:text-neutral-300 dark:hover:bg-primary-400 dark:hover:text-neutral-800 m-1 hover:bg-primary-500 hover:text-neutral rounded min-w-[2.4rem] inline-block text-center p-1" href="https://www.linkedin.com/shareArticle?mini=true&url=https://juliagdealedo.github.io/blog/elevation-profile/&title=Elevation%20profile%20of%20Spain%20in%20R" title="Share on LinkedIn">
<span class="relative inline-block align-text-bottom icon"><svg aria-hidden="true" focusable="false" data-prefix="fab" data-icon="linkedin" class="svg-inline--fa fa-linkedin fa-w-14" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path fill="currentcolor" d="M416 32H31.9C14.3 32 0 46.5.0 64.3v383.4C0 465.5 14.3 480 31.9 480H416c17.6.0 32-14.5 32-32.3V64.3c0-17.8-14.4-32.3-32-32.3zM135.4 416H69V202.2h66.5V416zm-33.2-243c-21.3.0-38.5-17.3-38.5-38.5S80.9 96 102.2 96c21.2.0 38.5 17.3 38.5 38.5.0 21.3-17.2 38.5-38.5 38.5zm282.1 243h-66.4V312c0-24.8-.5-56.7-34.5-56.7-34.6.0-39.9 27-39.9 54.9V416h-66.4V202.2h63.7v29.2h.9c8.9-16.8 30.6-34.5 62.9-34.5 67.2.0 79.7 44.3 79.7 101.9V416z"/></svg>
</span>
</a>
<a class="bg-neutral-300 text-neutral-700 dark:bg-neutral-700 dark:text-neutral-300 dark:hover:bg-primary-400 dark:hover:text-neutral-800 m-1 hover:bg-primary-500 hover:text-neutral rounded min-w-[2.4rem] inline-block text-center p-1" href="mailto:?body=https://juliagdealedo.github.io/blog/elevation-profile/&subject=Elevation%20profile%20of%20Spain%20in%20R" title="Send via email">
<span class="relative inline-block align-text-bottom icon"><svg aria-hidden="true" focusable="false" data-prefix="fas" data-icon="at" class="svg-inline--fa fa-at fa-w-16" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentcolor" d="M256 8C118.941 8 8 118.919 8 256c0 137.059 110.919 248 248 248 48.154.0 95.342-14.14 135.408-40.223 12.005-7.815 14.625-24.288 5.552-35.372l-10.177-12.433c-7.671-9.371-21.179-11.667-31.373-5.129C325.92 429.757 291.314 440 256 440c-101.458.0-184-82.542-184-184S154.542 72 256 72c100.139.0 184 57.619 184 160 0 38.786-21.093 79.742-58.17 83.693-17.349-.454-16.91-12.857-13.476-30.024l23.433-121.11C394.653 149.75 383.308 136 368.225 136h-44.981a13.518 13.518.0 00-13.432 11.993l-.01.092c-14.697-17.901-40.448-21.775-59.971-21.775-74.58.0-137.831 62.234-137.831 151.46.0 65.303 36.785 105.87 96 105.87 26.984.0 57.369-15.637 74.991-38.333 9.522 34.104 40.613 34.103 70.71 34.103C462.609 379.41 504 307.798 504 232 504 95.653 394.023 8 256 8zm-21.68 304.43c-22.249.0-36.07-15.623-36.07-40.771.0-44.993 30.779-72.729 58.63-72.729 22.292.0 35.601 15.241 35.601 40.77.0 45.061-33.875 72.73-58.161 72.73z"/></svg>
</span>
</a>
</section>
</footer>
</article>
</main><footer class=py-10>
<div class="flex justify-between">
<div>
<p class="text-sm text-neutral-400 dark:text-neutral-500">
&copy;
2021
Julia G. de Aledo
</p>
<p class="text-xs text-neutral-300 dark:text-neutral-600">
Powered by <a class="hover:underline hover:underline-primary-300 hover:text-primary-400" href=https://gohugo.io/ target=_blank rel="noopener noreferrer">Hugo</a> & <a class="hover:underline hover:underline-primary-300 hover:text-primary-400" href=https://git.io/hugo-congo target=_blank rel="noopener noreferrer">Congo</a>
</p>
</div>
</div>
</footer>
</body>
</html>